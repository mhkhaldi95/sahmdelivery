@extends('layout.master')
@section('content')

    <div class="post d-flex flex-column-fluid" id="kt_post">
        <!--begin::Container-->
        <div id="kt_content_container" class="container-xxl">

            <!--begin::Row-->
            <div class="row g-5 g-xl-8">
                <div class="col-xl-4">
                    <!--begin::Statistics Widget 5-->
                    <a href="#" class="card bg-body-white hoverable card-xl-stretch mb-xl-8">
                        <!--begin::Body-->
                        <div class="card-body">
                            <!--begin::Svg Icon | path: icons/duotune/ecommerce/ecm002.svg-->
                            <span class="svg-icon svg-icon-primary svg-icon-3x ms-n1">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M16.0173 9H15.3945C14.2833 9 13.263 9.61425 12.7431 10.5963L12.154 11.7091C12.0645 11.8781 12.1072 12.0868 12.2559 12.2071L12.6402 12.5183C13.2631 13.0225 13.7556 13.6691 14.0764 14.4035L14.2321 14.7601C14.2957 14.9058 14.4396 15 14.5987 15H18.6747C19.7297 15 20.4057 13.8774 19.912 12.945L18.6686 10.5963C18.1487 9.61425 17.1285 9 16.0173 9Z"
                                        fill="currentColor"/>
                                    <rect opacity="0.3" x="14" y="4" width="4" height="4" rx="2" fill="currentColor"/>
                                    <path
                                        d="M4.65486 14.8559C5.40389 13.1224 7.11161 12 9 12C10.8884 12 12.5961 13.1224 13.3451 14.8559L14.793 18.2067C15.3636 19.5271 14.3955 21 12.9571 21H5.04292C3.60453 21 2.63644 19.5271 3.20698 18.2067L4.65486 14.8559Z"
                                        fill="currentColor"/>
                                    <rect opacity="0.3" x="6" y="5" width="6" height="6" rx="3" fill="currentColor"/>
                                    </svg>
                            </span>
                            <!--end::Svg Icon-->
                            <div class="text-gray-900 fw-bolder fs-2 mb-2 mt-5">{{__('lang.customers')}}</div>
                            <div class="fw-bold text-gray-400">{{__('customers number')}}
                                : {{\App\Models\User::query()->customers()->count()}}</div>
                        </div>
                        <!--end::Body-->
                    </a>
                    <!--end::Statistics Widget 5-->
                </div>
                <div class="col-xl-4">
                    <!--begin::Statistics Widget 5-->
                    <a href="#" class="card bg-primary hoverable card-xl-stretch mb-xl-8">
                        <!--begin::Body-->
                        <div class="card-body">
                            <!--begin::Svg Icon | path: icons/duotune/general/gen008.svg-->
                            <span class="svg-icon svg-icon-white svg-icon-3x ms-n1">
											<svg width="800px" height="800px" viewBox="0 -69 1162 1162" fill="#FFFFFF"
                                                 class="icon" version="1.1" xmlns="http://www.w3.org/2000/svg"><path
                                                    d="M1024.408674 676.899827l-13.213782-3.950512V206.516429a34.056139 34.056139 0 0 0-34.05614-34.056139H800.864175V34.056139a34.056139 34.056139 0 0 0-34.05614-34.056139H535.90741a34.056139 34.056139 0 0 0-34.05614 34.056139v74.514833h-124.236796a34.056139 34.056139 0 0 0-34.05614 34.05614v101.62352H184.856725a34.056139 34.056139 0 0 0-34.05614 34.056139v362.765997c0 6.538779 1.907144 12.532659 5.040309 17.709193l-41.003592 21.251031a41.003592 41.003592 0 0 0-22.068378 36.235732v52.855129H136.224558v33.919914l38.415325 15.938274V741.061594l166.057736-86.230145 185.810296 71.381668V886.82187c11.442863 0.408674 22.885726 0.817347 34.464813 0.953572l20.433684 0.272449 19.752561-0.272449c2.315817 0 4.76786-0.136225 7.083677-0.272449v-189.352135c0-16.891845-10.489291-32.148996-26.155115-38.142876l-5.312758-2.043368v-6.947453h222.046029v222.318478c27.381136-3.814288 53.672476-8.309698 78.192896-13.622456l3.541839-0.817347V718.993215l91.134229 27.517361v86.775043c15.25715-5.721431 28.607157-11.579087 39.505122-17.572968l11.987761-6.538778 2.724491-2.315818v-37.461753h27.653585v-53.263802c-0.136225-18.117866-11.987761-34.056139-29.152055-39.232673zM343.558334 366.035386h-33.511241a34.056139 34.056139 0 0 0 0 68.112279h33.511241v64.979114h-33.511241a34.056139 34.056139 0 0 0 0 68.112279h33.511241v2.588267c-8.309698-1.089796-16.755621 0.272449-24.247971 4.222961l-100.397499 52.174006V312.499135h124.64547v53.536251z m195.618465 203.24704c6.675003-6.26633 10.897965-14.984701 10.897965-24.929094a34.056139 34.056139 0 0 0-34.05614-34.056139h-1.770919a34.056139 34.056139 0 0 0-34.056139 34.056139c0 17.572968 13.486231 32.012771 30.650525 33.647466a40.594918 40.594918 0 0 0-15.802048 32.012771V626.632965l-83.36943-32.012771V176.683251h183.903153v389.73846c0 0.953572 0.272449 1.907144 0.272449 2.860715h-56.669416z m193.575097 0H663.413596c0.136225-0.953572 0.272449-1.907144 0.272449-2.860715V142.627112a34.056139 34.056139 0 0 0-34.056139-34.05614h-59.666357V68.112279h162.788347v501.170147z m210.330717 83.096981l-62.527072-18.798989v-23.430624c0-22.613277-18.254091-40.867367-40.867368-40.867368h-38.823998v-37.053079h30.922974a34.056139 34.056139 0 0 0 0-68.112279h-30.922974v-62.663297h30.922974a34.056139 34.056139 0 0 0 0-68.112278h-30.922974v-92.768924h142.218438v411.806838z m-563.288546 107.6174H321.489956c-22.613277 0-40.867367 18.254091-40.867367 40.867368v58.031661l4.631635 0.953572c35.690834 7.628575 74.787282 13.75868 116.199547 18.390315l18.935214 2.179593h0.408674v-79.555141c-0.136225-22.477052-18.390315-40.867367-41.003592-40.867368z m330.753226-59.938805h-23.2944a34.056139 34.056139 0 0 0-34.056139 34.056139v43.046961a34.056139 34.056139 0 0 0 34.056139 34.056139h23.2944a34.056139 34.056139 0 0 0 34.056139-34.056139v-43.046961c0-18.935214-15.25715-34.056139-34.056139-34.056139zM516.018624 377.342025h-1.770919a34.056139 34.056139 0 0 0 0 68.112279h1.770919a34.056139 34.056139 0 0 0 0-68.112279z m0-132.955169h-1.770919a34.056139 34.056139 0 0 0 0 68.112279h1.770919a34.056139 34.056139 0 0 0 0-68.112279zM1080.396967 823.7499c0 3.814288-3.950512 11.306638-14.984701 20.842358l53.263802 61.982173c35.827059-30.78675 43.319409-61.982174 43.319409-82.824531h-81.59851zM896.902488 952.754556l-8.582147-39.505121c-37.461753 8.037249-78.329121 14.439803-121.512306 19.207662l8.990821 81.189837c45.907676-5.040309 89.36331-11.987761 129.549554-20.569909l-0.136224-0.408673 4.631635-0.817348-12.941333-39.096448zM234.306239 903.84994c-0.136225 0-0.272449 0-0.272449-0.136224-44.272981-11.579087-82.143408-25.473992-109.115871-40.322469l-39.232672 71.654117c33.511241 18.390315 76.558201 34.464813 128.187309 47.81482l9.671943-37.325529 0.136225-0.408674-9.535719 37.870427 10.080617-39.641346 12.941333-38.823999-2.860716-0.681123zM1057.78369 900.580551l-0.817347-1.362246-19.616336-35.827058c-27.108687 14.848477-64.979114 28.879606-109.524545 40.458693l20.569908 79.146468c50.947985-13.213782 93.586271-29.152055 126.825064-47.133697h0.136224c0.408674-0.272449 0.817347-0.408674 1.226021-0.681123l-18.798989-34.601037zM99.035253 846.77185L96.583211 844.592258C85.685247 835.192763 81.734735 827.700412 81.734735 823.7499H0c0 20.706133 7.492351 51.901556 43.319409 82.824531l4.222962 3.26939 22.613276-33.783691 28.879606-29.28828zM729.346282 936.271385l-3.541839 0.136224c-40.186245 3.405614-82.007184 5.312758-123.964347 5.857656l0.953572 81.734735c44.000532-0.544898 87.728615-2.588267 129.958228-6.130105l-3.26939-39.096448v-42.502062zM273.811361 913.249435l-17.02807 79.963815c40.05002 8.582147 83.641878 15.393375 129.549555 20.569908v-0.544898l4.631635 0.681123V972.643342l4.359185-40.186245c-43.183185-4.76786-84.186777-11.306638-121.512305-19.207662zM436.463483 936.407609l-6.811228 81.462286c42.093388 3.541838 85.821471 5.585207 129.958228 6.130105l0.408674-40.867367v-5.585207l0.408673-35.282161c-42.229613-0.544898-83.914328-2.452042-123.964347-5.857656z"/></svg>
												</span>
                            <!--end::Svg Icon-->
                            <div class="text-white fw-bolder fs-2 mb-2 mt-5"> الأماكن</div>
                            <div class="fw-bold text-white">عدد الأماكن :
                                {{\App\Models\User::query()->places()->count()}}

                            </div>
                        </div>
                        <!--end::Body-->
                    </a>
                    <!--end::Statistics Widget 5-->
                </div>
                <div class="col-xl-4">
                    <!--begin::Statistics Widget 5-->
                    <a href="#" class="card bg-dark hoverable card-xl-stretch mb-5 mb-xl-8">
                        <!--begin::Body-->
                        <div class="card-body">
                            <!--begin::Svg Icon | path: icons/duotune/arrows/arr070.svg-->
                            <span class="svg-icon svg-icon-gray-100 svg-icon-3x ms-n1">
                             <svg fill="#FFFFFF" height="800px" width="800px" version="1.1" id="Layer_1"
                                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                  viewBox="0 0 491.623 491.623" xml:space="preserve">
                                    <g>
                                        <g>
                                            <path d="M430.182,368.696c-33.874,0-61.44,27.566-61.44,61.44c0,33.874,27.566,61.44,61.44,61.44
                                                c33.874,0,61.44-27.566,61.44-61.44C491.622,396.262,464.056,368.696,430.182,368.696z M430.182,450.616
                                                c-11.305,0-20.48-9.195-20.48-20.48c0-11.285,9.175-20.48,20.48-20.48s20.48,9.196,20.48,20.48S441.487,450.616,430.182,450.616z"
                                            />
                                        </g>
                                    </g>
                                    <g>
                                        <g>
                                            <path d="M418.693,247.405c-4.301-17.572-11.612-36.639-29.491-48.947l-0.082-55.071c-0.021-11.305-9.175-20.46-20.48-20.46
                                                h-81.818h-44.565c-2.724-7.68-7.066-14.561-12.431-20.521c9.789-10.875,15.933-25.129,15.933-40.919
                                                c0-33.874-27.566-61.44-61.44-61.44c-33.874,0-61.44,27.566-61.44,61.44c0,15.79,6.164,30.065,15.974,40.96
                                                c-9.81,10.895-15.974,25.17-15.974,40.96v122.88H102.4v-81.92c0-11.305-9.155-20.48-20.48-20.48H20.48
                                                c-11.325,0-20.48,9.175-20.48,20.48v102.4v102.298c0,27.709,18.575,50.954,43.827,58.634
                                                c7.619,25.293,30.843,43.868,58.573,43.868c26.665,0,49.193-17.162,57.672-40.96h167.711c8.561,0,16.2-5.304,19.19-13.332
                                                c21.094-56.607,46.756-89.068,70.41-89.068c22.221,0,33.055,8.274,39.281,14.479c5.878,5.878,14.684,7.639,22.323,4.444
                                                c7.66-3.174,12.636-10.629,12.636-18.924v-12.595C491.622,291.868,460.186,255.331,418.693,247.405z M102.4,450.608
                                                c-11.305,0-20.48-9.175-20.48-20.48c0-11.284,9.175-20.48,20.48-20.48s20.48,9.196,20.48,20.48
                                                C122.88,441.433,113.705,450.608,102.4,450.608z M199.311,348.207c3.625-11.407,5.489-23.265,5.489-35.267
                                                c0-21.75-16.548-41.165-39.404-46.162c-0.512-0.123-1.024-0.205-1.556-0.287V143.407c0-11.284,9.175-20.48,20.48-20.48
                                                s20.48,9.195,20.48,20.48c0,11.325,9.155,20.48,20.48,20.48h41.062v20.48h-61.44c-11.325,0-20.48,9.175-20.48,20.48v40.96
                                                c0,11.325,9.155,20.48,20.48,20.48l21.361,1.495l30.72,80.425H199.311z M286.822,311.569l-21.852-57.201
                                                c-5.427-17.326-21.238-29-39.588-29.041h61.44V311.569z"/>
                                        </g>
                                    </g>
                                    </svg>
                            </span>


                            <!--end::Svg Icon-->
                            <div class="text-gray-100 fw-bolder fs-2 mb-2 mt-5">الكباتن</div>
                            <div class="fw-bold text-gray-100">عدد الكباتن :
                                {{\App\Models\User::query()->captains()->count()}}

                            </div>
                        </div>
                        <!--end::Body-->
                    </a>
                    <!--end::Statistics Widget 5-->
                </div>
            </div>
            <!--end::Row-->
            <!--begin::Row-->
            <div class="row g-5 g-xl-8">
                <!--begin::Col-->
                <div class="col-xl-4">
                    <!--begin::List Widget 1-->
                    <div class="card card-xl-stretch mb-xl-8">
                        <!--begin::Header-->
                        <div class="card-header border-0 pt-5">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="card-label fw-bolder text-dark">  أكثر الكباتن حصولا على الطلبات لهذا اليوم</span>
                            </h3>
                        </div>
                        <!--end::Header-->
                        <!--begin::Body-->
                        <div class="card-body pt-5">
                            @if(count($captains_most_trips_for_day) > 0)
                                @foreach($captains_most_trips_for_day as $captains_trips)
                                    <div class="row">

                                        <div class="col-2">
                                            <div class="symbol symbol-50px me-5">
                                                            <span class="symbol-label ">
                                                               <img  src=" {{$captains_trips->captain->photo_path}}" width="50" height="50"/>
                                                            </span>
                                            </div>
                                        </div>
                                        <div class="col-5">
                                            <a href="#" class="text-dark text-hover-primary fs-6 fw-bolder"></a>
                                            <span class="text-muted fw-bold">{{$captains_trips->captain->name}}</span>
                                        </div>
                                        <div class="col-5">
                                            <a href="#" class="text-danger text-hover-primary fs-6 fw-bolder"></a>
                                            <span class="text-muted fw-bold">({{$captains_trips->trip_count}})</span>
                                        </div>

                                    </div>
                                @endforeach
                            @endif
                        </div>
                        <!--end::Body-->
                    </div>
                    <!--end::List Widget 1-->
                </div>
                <!--end::Col-->
                <!--begin::Col-->
                <div class="col-xl-8">
                    <!--begin::Tables Widget 5-->
                    <div class="card card-xl-stretch mb-5 mb-xl-8">
                        <!--begin::Header-->
                        <div class="card-header border-0 pt-5">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="card-label fw-bolder fs-3 mb-1">الرحلات الحديثة</span>
                            </h3>
                        </div>
                        <!--end::Header-->
                        <!--begin::Body-->
                        <div class="card-body py-3">
                            <div class="tab-content">
                                <!--begin::Tap pane-->
                                <div class="tab-pane fade show active" id="kt_table_widget_5_tab_1">
                                    <!--begin::Table container-->
                                    <div class="table-responsive">
                                        <!--begin::Table-->
                                        <table class="table align-middle table-row-dashed fs-6 gy-5" >
                                            <!--begin::Table head-->
                                            <thead>
                                            <!--begin::Table row-->
                                            <tr class="text-start text-gray-400 fw-bolder fs-7 text-uppercase gs-0">
                                                <th class="min-w-125px">صاحب الطلب</th>
                                                <th class="min-w-125px"> الكابتن</th>
                                                <th class="min-w-125px"> من</th>
                                                <th class="min-w-125px"> الى</th>
                                                <th class="min-w-125px"> السعر</th>
                                                <th class="min-w-125px"> الحالة</th>
                                            </tr>
                                            <!--end::Table row-->
                                            </thead>
                                            <!--end::Table head-->
                                            <!--begin::Table body-->
                                            @if(isset($recent_trips))
                                            <tbody class="fw-bold text-gray-600">
                                            @foreach($recent_trips as $trip)
                                                <tr>
                                                    <td>{{@$trip->owner->name}}</td>
                                                    <td>{{$trip->captain->name}}</td>
                                                    <td>{{$trip->from}}</td>
                                                    <td>{{$trip->to}}</td>
                                                    <td>{{$trip->amount}}</td>
                                                    <td>{{getStatusStr($trip->status)}}</td>
                                                </tr>
                                            @endforeach
                                            </tbody>
                                            @endif
                                        </table>
                                    </div>
                                    <!--end::Table-->
                                </div>
                                <!--end::Tap pane-->
                            </div>
                        </div>
                        <!--end::Body-->
                    </div>
                    <!--end::Tables Widget 5-->
                </div>
                <!--end::Col-->
            </div>
            <!--end::Row-->
        </div>
    </div>
@endsection
